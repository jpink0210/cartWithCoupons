# 開發過程中的「未解之題」

1. 為何不下單？

主要是題目並沒有要求，其次是我的作品集，和提供線上的 demo 都有非常完整的實作。
包含：
- 下單之後，購物車狀態轉換
- 結帳時產生訂單，進入 pending
- 由買家進行核實發貨
- 發貨後進行通知的佇列

所以我想，不處理這個部分，也是礙於時間壓力，針對題目作答。

2. 為何優惠券，要多開一張表單？

主要是題目設計是針對賣場的，大型優惠活動。
並不像是，譬如說蝦皮，常常可以領取的，有限量的、專屬於user 的優惠券

因此原本在設計上，有考量專門為了 user, 開一張 user_coupons 的表單
儲存有個別化差異的優惠券。
有別於考題，這種單次使用型的設計，不同項商品，無法重複使用。
但好在這次題目設計沒有這麼複雜，就不需要開這張私有優惠券 table。

因此在 table 命名上，針對題目的 mart_coupon 的命名就是區分開來。

# 開發遇到的難點

註冊上針對 auth 遇到了兩個問題，花比較時間查詢，大概各兩小時。

1. [技術面] jwt 套件，版本差異

我原本是使用 lcobucci/jwt 的套件，此次答題的開發環境
跟我 demo 的版本差異不大，但是套件失靈。

```
    $request->user()->token()->revoke();
```
一個簡單將，token 卸除的 operator  就失效了。
我原本想說去比對版本差異，
但是後來選擇走直路，把套件拉出來實例化
針對實例釋出的端口進行操作，將 token 卸除。

2. [觀念面] 登出頻頻失敗

承接第一題， db 都已經完美的更新 token，但是 laravel server 的 Auth 都吃不到。
畫面切換都會有問題

我才意識，我使用套件，某方面來說只是操作 db
並不是完整的控制，server 暫存的狀態
於是直接同步化 Auth，得到了正確的結果。


